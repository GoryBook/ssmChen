<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.oaec.ssm.biz.sys.dao.SysDao">
    <select id="getUserByName"  parameterType="String"
            resultType="map">
        select * from user where userName=#{userName}
    </select>
    <select id="getAuthByUserId" parameterType="int" resultType="map">
    SELECT *,authName as text,authURL as url FROM auth WHERE id
    in(SELECT  authId FROM role_auth WHERE roleId
    in (SELECT roleId FROM user_role WHERE userId=#{userId}))
    AND type ='1'
    AND valid='1'
    ORDER BY orders
</select>
    <select id="getResourceByUserId" parameterType="int" resultType="string">
        SELECT authCode FROM auth WHERE id
        in(SELECT  authId FROM role_auth WHERE roleId
        in (SELECT roleId FROM user_role WHERE userId=#{userId}))
        AND type ='2'
        AND valid='1'
        ORDER BY orders
    </select>
</mapper>

